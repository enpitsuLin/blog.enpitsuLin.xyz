---
title: 使用Nextjs重构我的博客
date: 2022-3-30 9:34:00
tags: ['blog', 'tailwindcss']
draft: true
summary: 从Gatsby迁移到Nextjs，抛弃大而全的而选择小而美的框架，并简单的使用了一个模板，但是一些功能展示效果和页面样式还是有待改进的。
---

又到了一年一度鼓捣博客的时间~~咳咳~~，因为升级 gatsby 导致仓库收到太多依赖警告了，同时意识到大而全的框架的一些缺点，所以决定抛弃 Gatsby 转而使用 Nextjs

# Gatsby vs Nextjs

同为 React 生态中的页面构建框架，他们均提供了 SSG 的功能，作为一个简单的博客仅静态导出就完全能够达到我的需求了。

对于页面数据的获取上，Gatsby 和 Nextjs 差异在于 Nextjs 允许从任意的数据源获取数据，仅仅需要在指定生命周期函数`getStaticProps`中返回相应的值即可，但是 gatsby 的数据源是基于`graphql`的，但是很多实现均依赖插件，很大程度上依赖社区和官方的工作。

当前文章内容都是通过本地文件系统保存，使用 Gatsby 和 Nextjs 基本等效，但是对于 Typescript 的支持 Nextjs 远远的将 Gatsby 甩在后面

# 使用模板

本身是想将原先的使用 Nextjs 复现然后再进行更改，但是中途发现使用 [MDX](https://mdxjs.com/) 来构建文章会比纯 markdown 的展示效果更好。

但是在集成的过程中发现在 Nextjs 中使用 MDX 如果不作为 pages 页面交给 Nextjs 处理则无法进行很好的自定义，但是通过`next-mdx-remote` 或 `mdx-bundler`在渲染的时候需要使用`new Function()`

然后在寻找解决方法的过程中发现了一个[模板](https://github.com/timlrx/tailwind-nextjs-starter-blog)，同时此模板使用了[tailwindcss](https://tailwindcss.com/)，近期我也总是有在使用同类型的[windicss](https://windicss.org/)~~因为之前 tailwind 没有 JIT 模式~~

然后就转而使用该模板，很多布局我觉得挺不错的，但是其中的一些功能和页面展示样式我觉得还是需要改进，首页之类的还过于简陋。

# 内容管理

在先前 Gastby 最后的版本中我使用了 Netlify CMS 来管理内容，基本也形成了 JAMStack 的结构，但是使用体验来说着实还是差点，作为内容管理我觉得使用体验不是很到位。

中途也尝试用 Notion 来做内容管理，但多多少少又一些不如直接 markdown 来的效果好
