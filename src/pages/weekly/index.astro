---
import { ITEMS_PRE_PAGE } from '~/consts';
import ListLayout from '~/layouts/ListLayout.astro';
import { useWeekly, useWeeklyCount } from '~/lib/content';
import { weeklyPagination } from '~/lib/pagination';

const post = useWeekly({ limit: ITEMS_PRE_PAGE });
const total = useWeeklyCount();
---

<ListLayout
  title="All Weeklies"
  posts={post}
  pagination={weeklyPagination}
  page={{
    total: Math.ceil(total / ITEMS_PRE_PAGE),
    current: 1
  }}
/>
